        const agriculturalOffices = {
            "Alappuzha": [
                { officer: "Dr. Ramesh Kumar", designation: "District Agricultural Officer", phone: "0477-2251344", email: "dao.alappuzha@kerala.gov.in" },
                { officer: "Maya N Gopalakrishnan", designation: "Deputy Director", phone: "0477-2251403", email: "ddaeaiappuzha@gmail.com" },
                { officer: "Fatihina Rehiyanath K", designation: "Agriculture Officer", phone: "9383470582", email: "kbpanavally@gmail.com" }
            ],
            "Ernakulam": [
                { officer: "Smt. Anitha Joseph", designation: "District Agricultural Officer", phone: "0484-2361234", email: "dao.ernakulam@kerala.gov.in" },
                { officer: "Priyamoi Thomas", designation: "Assistant Director", phone: "0808470944", email: "adakothamanqalam.agri@kerala.gov.in" },
                { officer: "Sonia K P", designation: "Agriculture Officer", phone: "9495569941", email: "krishibhavantripunithura@gmail.com" }
            ],
            "Idukki": [
                { officer: "Sri. Manoj Varma", designation: "District Agricultural Officer", phone: "04862-232678", email: "dao.idukki@kerala.gov.in" },
                { officer: "Asha S", designation: "Deputy Director", phone: "9383470820", email: "paoidukki@gmail.com" },
                { officer: "Chandrabindu K R", designation: "Assistant Director", phone: "9383471170", email: "adathodupuzha@gmail.com" }
            ],
            "Kannur": [
                { officer: "Sri. Vinod Kumar", designation: "District Agricultural Officer", phone: "0497-2701234", email: "dao.kannur@kerala.gov.in" },
                { officer: "Vishnu S Nair", designation: "Deputy Director", phone: "9383472031", email: "vishnusnairagri@gmail.com" },
                { officer: "Anusha Anwar", designation: "Agriculture Officer", phone: "9383472156", email: "kbnarathkm.agri@kerala.gov.in" }
            ],
            "Kasaragod": [
                { officer: "Dr. Nisha Balan", designation: "District Agricultural Officer", phone: "04994-256789", email: "dao.kasaragod@kerala.gov.in" },
                { officer: "Anil Sebastian", designation: "Agriculture Officer", phone: "9383472351", email: "kbbalaksd.agri@kerala.gov.in" },
                { officer: "Baburaj", designation: "Agriculture Officer", phone: "9383472354", email: "panathadykrishibhavan@gmail.com" }
            ],
            "Kollam": [
                { officer: "Smt. Divya Menon", designation: "District Agricultural Officer", phone: "0474-2794567", email: "dao.kollam@kerala.gov.in" },
                { officer: "Priyakumar P", designation: "Agriculture Officer", phone: "0474-2795082", email: "principalaokollam@gmail.com" },
                { officer: "P V Sudharsanan", designation: "Agriculture Officer", phone: "0475-2230958", email: "afopunalurkb@gmail.com" }
            ],
            "Kottayam": [
                { officer: "Sri. Rajesh Nair", designation: "District Agricultural Officer", phone: "0481-2569876", email: "dao.kottayam@kerala.gov.in" },
                { officer: "Sreekala P A", designation: "Deputy Director", phone: "9383470605", email: "paoktmy.agri@kerala.gov.in" },
                { officer: "Roshna", designation: "Agriculture Officer", phone: "9383470632", email: "kbpalaktm@gmail.com" }
            ],
            "Kozhikode": [
                { officer: "Smt. Lekha Varghese", designation: "District Agricultural Officer", phone: "0495-2723456", email: "dao.kozhikode@kerala.gov.in" },
                { officer: "Nezam Ali E", designation: "Agriculture Officer", phone: "9383471872", email: "kbprmbrakzd.agri@kerala.gov.in" },
                { officer: "Ambily", designation: "Agriculture Officer", phone: "9383471876", email: "aokbpayyoli@gmail.com" }
            ],
            "Malappuram": [
                { officer: "Sri. Harish Kumar", designation: "District Agricultural Officer", phone: "0483-2734567", email: "dao.malappuram@kerala.gov.in" },
                { officer: "Reelekha P", designation: "Deputy Director", phone: "9383471618", email: "ddcreditmpm@gmail.com" },
                { officer: "Abubakker P B", designation: "Agriculture Officer", phone: "9383471664", email: "kbitrur@gmail.com" }
            ],
            "Palakkad": [
                { officer: "Dr. Jayachandran", designation: "District Agricultural Officer", phone: "0491-2534567", email: "dao.palakkad@kerala.gov.in" },
                { officer: "Nizam S A", designation: "Deputy Director", phone: "9383471460", email: "paopaikad.agri@kerala.gov.in" },
                { officer: "Archana", designation: "Agriculture Officer", phone: "9383471510", email: "kblekkidi@gmail.com" }
            ],
            "Pathanamthitta": [
                { officer: "Smt. Latha S", designation: "District Agricultural Officer", phone: "0468-2221344", email: "dao.pathanamthitta@kerala.gov.in" },
                { officer: "Sreekala P", designation: "Deputy Director", phone: "9383470336", email: "paoptm@gmail.com" },
                { officer: "Jayasree M", designation: "Agriculture Officer", phone: "9383470360", email: "kbranni@gmail.com" }
            ],
            "Thiruvananthapuram": [
                { officer: "Sri. Arun Kumar", designation: "District Agricultural Officer", phone: "0471-2324567", email: "dao.tvm@kerala.gov.in" },
                { officer: "Dr Thushara T Chandran", designation: "Agriculture Officer", phone: "9383470157", email: "krishibhavanvik@gmail.com" },
                { officer: "Pramod G S", designation: "Agriculture Officer", phone: "9383470180", email: "afoattingal@gmail.com" }
            ],
            "Thrissur": [
                { officer: "Smt. Priya Menon", designation: "District Agricultural Officer", phone: "0487-2334567", email: "dao.thrissur@kerala.gov.in" },
                { officer: "Nimba Franco E F", designation: "Deputy Director", phone: "9383473233", email: "paotsr.agri@kerala.gov.in" },
                { officer: "Pratheesh", designation: "Agriculture Officer", phone: "9383471390", email: "aokbanthikad@gmail.com" }
            ],
            "Wayanad": [
                { officer: "Dr. Suresh P", designation: "District Agricultural Officer", phone: "04936-202345", email: "dao.wayanad@kerala.gov.in" },
                { officer: "Iswaraprasad C M", designation: "Deputy Director", phone: "9383471912", email: "deputydirector.c@gmail.com" },
                { officer: "Rekha T", designation: "Agriculture Officer", phone: "9383471934", email: "kbpadinj@gmail.com" }
            ]
        };

        const schemes = {
            "State-Level": [
                { name: "Kerala Farmers’ Welfare Fund Board (KFWFB)", description: "Welfare benefits including pension, insurance, and financial aid for registered farmers.", link: "https://kfwfb.kerala.gov.in/otphome.php" },
                { name: "Kerala Farmer Registry (Agri Stack)", description: "Unique Farmer ID required to access benefits, subsidies, and schemes.", link: "https://klfr.agristack.gov.in/farmer-registry-kl/" },
                { name: "Agriculture Labour Pension (ALP)", description: "Pension for agricultural labourers (age ≥ 60, income & service criteria apply).", link: "https://lsgkerala.gov.in/en/welfarepension/alp" },
                { name: "Social Security Pension – Forms", description: "Application forms for pensions including agriculture labour pension.", link: "https://welfarepension.lsgkerala.gov.in/ApplicationFormsEng.aspx" }
            ]
        };

        function showContactsModal() {
            const modal = document.getElementById("contactsModal");
            modal.classList.remove("hidden");
            modal.classList.add("flex");
            updateDistrictContacts();
            document.body.classList.add("modal-open");
        }

        function closeContactsModal() {
            const modal = document.getElementById("contactsModal");
            modal.classList.add("hidden");
            modal.classList.remove("flex");
            document.body.classList.remove("modal-open");
        }

        function showSchemesModal() {
            const modal = document.getElementById("schemesModal");
            modal.classList.remove("hidden");
            modal.classList.add("flex");
            updateSchemeList();
            document.body.classList.add("modal-open");
        }

        function closeSchemesModal() {
            const modal = document.getElementById("schemesModal");
            modal.classList.add("hidden");
            modal.classList.remove("flex");
            document.body.classList.remove("modal-open");
        }

        function generateContactsTable(district, contacts) {
            let html = `
                <div class="district-section mb-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3 border-b border-green-500 pb-1">${district}</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm">
                            <thead class="bg-green-50">
                                <tr>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b">Officer</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b">Designation</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b">Phone</th>
                                    <th class="px-4 py-2 text-left text-xs font-medium text-gray-600 uppercase tracking-wider border-b">Email</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                ${contacts.map(contact => `
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-4 py-2 text-sm text-gray-800">${contact.officer}</td>
                                        <td class="px-4 py-2 text-sm text-gray-800">${contact.designation}</td>
                                        <td class="px-4 py-2 text-sm text-gray-800">${contact.phone}</td>
                                        <td class="px-4 py-2 text-sm text-gray-800">
                                            <a href="mailto:${contact.email}" class="text-blue-500 hover:text-blue-700 underline">${contact.email}</a>
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>`;
            return html;
        }

        function generateSchemeList(category, schemes) {
            let html = `
                <div class="scheme-section mb-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3 border-b border-green-500 pb-1">${category}</h3>
                    <div class="space-y-6">
                        ${schemes.map(scheme => `
                            <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200 hover:bg-gray-50">
                                <h3 class="text-lg font-semibold text-gray-800">${scheme.name}</h3>
                                <p class="text-gray-600 text-sm mt-1">${scheme.description}</p>
                                <a href="${scheme.link}" target="_blank" class="text-blue-500 hover:text-blue-700 underline mt-2 inline-block">Apply Now</a>
                            </div>
                        `).join('')}
                    </div>
                </div>`;
            return html;
        }

        function updateDistrictContacts() {
            const district = document.getElementById("districtSelect").value;
            const container = document.getElementById("contactsContainer");
            container.innerHTML = "";

            if (district && agriculturalOffices[district]) {
                container.innerHTML = generateContactsTable(district, agriculturalOffices[district]);
            } else {
                for (let d in agriculturalOffices) {
                    container.innerHTML += generateContactsTable(d, agriculturalOffices[d]);
                }
            }
        }

        function updateSchemeList() {
            const category = document.getElementById("schemeCategory").value;
            const container = document.getElementById("schemesContainer");
            container.innerHTML = "";

            if (category && schemes[category]) {
                container.innerHTML = generateSchemeList(category, schemes[category]);
            } else {
                for (let cat in schemes) {
                    container.innerHTML += generateSchemeList(cat, schemes[cat]);
                }
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const officesDiv = document.getElementById("offices-trigger");
            if (officesDiv) {
                officesDiv.addEventListener('click', showContactsModal);
            }

            const schemesDiv = document.getElementById("schemes-trigger");
            if (schemesDiv) {
                schemesDiv.addEventListener('click', showSchemesModal);
            }

            const closeContactsBtn = document.querySelector('#contactsModal .close-modal');
            if (closeContactsBtn) {
                closeContactsBtn.addEventListener('click', closeContactsModal);
            }

            const closeSchemesBtn = document.querySelector('#schemesModal .close-modal');
            if (closeSchemesBtn) {
                closeSchemesBtn.addEventListener('click', closeSchemesModal);
            }

            window.onclick = function(event) {
                const contactsModal = document.getElementById("contactsModal");
                const schemesModal = document.getElementById("schemesModal");
                if (event.target === contactsModal) {
                    closeContactsModal();
                } else if (event.target === schemesModal) {
                    closeSchemesModal();
                }
            };

            const districtSelect = document.getElementById("districtSelect");
            if (districtSelect) {
                districtSelect.addEventListener('change', updateDistrictContacts);
            }

            const schemeCategory = document.getElementById("schemeCategory");
            if (schemeCategory) {
                schemeCategory.addEventListener('change', updateSchemeList);
            }
        });